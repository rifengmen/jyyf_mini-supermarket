<!--pages/goodsList/goodsList.wxml-->
<view class="container color333333 font28">
  <!-- 商品列表 start -->
  <view class="main">
    <view class="goods_list2">
      <block>
        <navigator class="goods_item2 bgffffff border_be5e5e5" hover-class="none" wx:for="{{goodsList}}" wx:key="index"
                   url="/pages/goodsDetail/goodsDetail?Gdscode={{item.Gdscode}}&title={{item.Name}}&panicbuycode={{item.panicbuycode}}&deptname={{deptname}}&deptcode={{deptcode}}">
          <view class="item_img overflow">
            <image src="{{item.Defaultimage ? (baseUrl + item.Defaultimage) : errorImage}}" mode="aspectFit" lazy-load="true"></image>
            <view class="age colorffffff" wx:if="{{panicBuy && item.flag}}">已抢光</view>
          </view>
          <view class="item_desc">
            <view class="item_name ellipsis2">{{item.Name}}</view>
            <view class="panicBuy color999999 font24" wx:if="{{panicBuy}}">{{item.startdate}} - {{item.enddate}}
            </view>
            <view class="panicBuy color999999 font24" wx:if="{{panicBuy}}">总限量：{{item.totalamount}}
              已购：{{item.havebuyamount}}
            </view>
            <view class="price_cont" wx:if="{{panicBuy}}">
              <view class="price" wx:if="{{item.scaleflag}}">
                <view class="actual_price colorfa6400">￥{{item.panicprice / 2}}/斤</view>
                <del class="color999999 font22" wx:if="{{item.panicprice !== item.saleprice}}">￥{{item.saleprice /
                  2}}/斤
                </del>
              </view>
              <view class="price" wx:else>
                <view class="actual_price colorfa6400">￥{{item.panicprice}}</view>
                <del class="color999999 font22" wx:if="{{item.panicprice !== item.saleprice}}">￥{{item.saleprice}}</del>
              </view>
              <view class="cart">
                <view class="cart_img" wx:if="{{!item.flag}}">
                  <addCart id="panicBuyaddCart" catchtap="addCart" data-goods="{{item}}" bind:getCartCount="getCartCount"></addCart>
                </view>
              </view>
            </view>
            <view class="price_cont" wx:else>
              <view class="price" wx:if="{{item.scaleflag}}">
                <view class="actual_price colorfa6400">￥{{item.Highpprice / 2}}/斤</view>
                <del class="color999999 font22" wx:if="{{item.Highoprice !== item.Highpprice}}">￥{{item.Highoprice /
                  2}}/斤
                </del>
              </view>
              <view class="price" wx:else>
                <view class="actual_price colorfa6400">￥{{item.Highpprice}}</view>
                <del class="color999999 font22" wx:if="{{item.Highoprice !== item.Highpprice}}">￥{{item.Highoprice}}
                </del>
              </view>
              <view class="cart">
                <view class="cart_img">
                  <addCart id="addCart" catchtap="addCart" data-goods="{{item}}"
                           bind:getCartCount="getCartCount"></addCart>
                </view>
              </view>
            </view>
          </view>
        </navigator>
      </block>
      <view class="nodata_cont" wx:if="{{!goodsList.length && getFlag}}">
        <view class="nodata overflow">
          <image src="/lib/images/goodsNodata.png"></image>
        </view>
        <view class="color999999 tc">暂无相关商品～</view>
      </view>
    </view>
  </view>
  <!-- 商品列表 end -->
  <!-- 购物车 start -->
  <navigator class="tocart bg000000 border_r500" hover-class="none" url="/pages/cart2/cart2">
    <image src="/lib/images/toCart.png" class="tocart_img border_r500 overflow"></image>
    <view class="badge colorffffff font24 bgfa5151 border_r500 overflow tc" wx:if="{{cartCount}}">{{cartCount}}
    </view>
  </navigator>
  <!-- 购物车 end -->
  <!-- dialog start -->
  <view class="dialog" wx:if="{{dialogFlag}}">
    <dialog goods="{{goods}}" bind:dialogClose="dialogClose" bind:dialogConfirm="dialogConfirm"></dialog>
  </view>
  <!-- dialog end -->
</view>
